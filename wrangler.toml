name = "10x-cards"
compatibility_date = "2025-11-18"
compatibility_flags = ["nodejs_compat", "disable_nodejs_process_v2"]

# For Cloudflare Pages deployment (required for Astro Cloudflare adapter)
# This tells Wrangler where to find the built static assets
pages_build_output_dir = "dist"

# Environment variables configuration
# Non-secret variables are defined here in [vars] section
# Secret variables must be set in Cloudflare Pages dashboard:
# Settings > Environment Variables > Add variable > Mark as "Encrypt"
#
# Required secrets (set in Cloudflare Pages Dashboard):
# - SUPABASE_KEY (legacy anon key - optional for backward compatibility)
# - SUPABASE_SERVICE_ROLE_KEY (service role key - bypasses RLS when DEFAULT_USER_ID is set)
# - OPENROUTER_API_KEY (for AI generation)
[vars]
# Supabase configuration
SUPABASE_URL = "https://lwqcjfvqgemdklntqiia.supabase.co"
PUBLIC_SUPABASE_URL = "https://lwqcjfvqgemdklntqiia.supabase.co"
PUBLIC_SUPABASE_KEY = "sb_publishable_pHiMfUr2kRVXwSj09bUujw_LIffiXY6"

# Default user ID for development/testing (bypasses authentication)
DEFAULT_USER_ID = "5a3e0f7e-ac4f-498d-b625-aa6dc1ac36be"

# OpenRouter configuration
OPENROUTER_USE_MOCK = "false"

# KV namespace for sessions (required by @astrojs/cloudflare adapter)
[[kv_namespaces]]
binding = "SESSION"
id = "4ea168ebd4f6477bbf90bd9d923c890c"
